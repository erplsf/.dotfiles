#!/bin/sh

if [ -z "${AWS_VAULT+x}" ]; then
    echo 'Only run inside `aws-vault` scope!' 1>&2
    exit 1
fi

if [ -z "${KUBECTL_CONTEXT+x}" ]; then
    echo 'KUBECTL_CONTEXT env variable must be set!' 1>&2
    exit 1
fi

function kubectl() {
    command kubectl --context="${KUBECTL_CONTEXT}" $@
}

function helm() {
    command helm --kube-context ${KUBECTL_CONTEXT} $@
}

function k9s() {
    command k9s --context ${KUBECTL_CONTEXT} --readonly $@
}

function istioctl() {
    command istioctl --context ${KUBECTL_CONTEXT} $@
}
